"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6313],{6313:(C,m,a)=>{a.r(m),a.d(m,{OrdensDeServicoAddEditPageModule:()=>T});var s=a(6895),d=a(433),t=a(8058),g=a(2598),u=a(655),v=a(3098),e=a(8256),p=a(4026),h=a(914);let f=(()=>{class i{constructor(o){this.databaseService=o}getAll(){return(0,u.mG)(this,void 0,void 0,function*(){const o=yield this.databaseService.sqliteConnection.retrieveConnection(p.$P,!1);o.open();let r=yield o.query("SELECT * FROM clientes ORDER BY nome");if(o.close(),r.values.length>0){let c=[];for(let l=0;l<r.values.length;l++)c.push(r.values[l]);return c}return[]})}}return i.\u0275fac=function(o){return new(o||i)(e.LFG(h.k))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var D=a(5561);function Z(i,n){if(1&i&&(e.TgZ(0,"ion-select-option",30),e._uU(1),e.qZA()),2&i){const o=n.$implicit;e.Q6J("value",o.clienteid),e.xp6(1),e.hij(" ",o.nome," ")}}function S(i,n){1&i&&(e.TgZ(0,"ion-button",31),e._uU(1," Alterar dados "),e.qZA())}function A(i,n){1&i&&(e.TgZ(0,"div",5)(1,"ion-grid")(2,"ion-row")(3,"ion-col",32)(4,"ion-button",33),e._uU(5," Gravar "),e.qZA()(),e.TgZ(6,"ion-col",32)(7,"ion-button",34),e._uU(8," Cancelar "),e.qZA()()()()())}function E(i,n){if(1&i){const o=e.EpF();e.ynx(0),e.TgZ(1,"form",11)(2,"ion-item",12)(3,"ion-label",13),e._uU(4,"Cliente"),e.qZA(),e.TgZ(5,"ion-select",14),e.YNc(6,Z,2,2,"ion-select-option",15),e.qZA()(),e.TgZ(7,"ion-item",12)(8,"ion-label",13),e._uU(9,"Ve\xc3\xadculo"),e.qZA(),e._UZ(10,"ion-input",16),e.qZA(),e.TgZ(11,"ion-item",17)(12,"div",18),e.NdJ("click",function(){e.CHM(o);const c=e.oxw();return e.KtG(c.selecionarDataEntrada())}),e.TgZ(13,"ion-grid",19)(14,"ion-row")(15,"ion-col",20)(16,"ion-item",21)(17,"ion-label",22),e._uU(18,"Data entrada"),e.qZA(),e._UZ(19,"ion-input",23),e.qZA()(),e._UZ(20,"ion-col"),e.TgZ(21,"ion-col")(22,"ion-item",21)(23,"ion-button",24),e._UZ(24,"ion-icon",25),e.qZA()()()()()()(),e.TgZ(25,"ion-item",17)(26,"div",18),e.NdJ("click",function(){e.CHM(o);const c=e.oxw();return e.KtG(c.selecionarHoraEntrada())}),e.TgZ(27,"ion-grid",19)(28,"ion-row")(29,"ion-col",20)(30,"ion-item",21)(31,"ion-label",26),e._uU(32,"Hora entrada"),e.qZA(),e._UZ(33,"ion-input",27),e.qZA()(),e._UZ(34,"ion-col"),e.TgZ(35,"ion-col")(36,"ion-item",21)(37,"ion-button",24),e._UZ(38,"ion-icon",25),e.qZA()()()()()()(),e.YNc(39,S,2,0,"ion-button",28),e.YNc(40,A,9,0,"div",29),e.qZA(),e.BQk()}if(2&i){const o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.osForm),e.xp6(1),e.Q6J("disabled",!o.modoDeEdicao),e.xp6(3),e.Q6J("value",o.ordemDeServico.clienteid),e.xp6(1),e.Q6J("ngForOf",o.clientes),e.xp6(1),e.Q6J("disabled",!o.modoDeEdicao),e.xp6(32),e.Q6J("ngIf",!o.modoDeEdicao),e.xp6(1),e.Q6J("ngIf",o.modoDeEdicao)}}const b=[{path:"",component:(()=>{class i{constructor(o,r,c,l){this.formBuilder=o,this.clientesService=r,this.datePicker=c,this.platform=l,this.modoDeEdicao=!1,this.clientes=[]}ngOnInit(){return(0,u.mG)(this,void 0,void 0,function*(){})}ionViewWillEnter(){return(0,u.mG)(this,void 0,void 0,function*(){const o=yield this.clientesService.getAll();this.clientes=o,this.ordemDeServico={ordemdeservicoid:v.i.createEmpty().toString(),clienteid:v.i.createEmpty().toString(),veiculo:"",dataehoraentrada:new Date},this.modoDeEdicao=!0,this.osForm=this.formBuilder.group({ordemdeservicoid:[this.ordemDeServico.ordemdeservicoid],clienteid:[this.ordemDeServico.clienteid,d.kI.required],veiculo:[this.ordemDeServico.veiculo,d.kI.required],dataentrada:[{value:this.ordemDeServico.dataehoraentrada.toLocaleDateString(),disabled:!this.modoDeEdicao},d.kI.required],horaentrada:[{value:this.ordemDeServico.dataehoraentrada.toLocaleTimeString(),disabled:!this.modoDeEdicao},d.kI.required],dataehoraentrada:[this.ordemDeServico.dataehoraentrada]})})}selecionarDataEntrada(){this.modoDeEdicao&&this.platform.ready().then(()=>{this.platform.is("capacitor")&&this.datePicker.show({date:new Date,mode:"date",locale:"pt-br",doneButtonLabel:"Confirmar",cancelButtonLabel:"Cancelar"}).then(o=>{this.osForm.controls.dataentrada.setValue(o.toLocaleDateString()),this.osForm.controls.horaentrada.setValue("")})})}selecionarHoraEntrada(){this.modoDeEdicao&&this.platform.ready().then(()=>{this.platform.is("capacitor")&&this.datePicker.show({date:new Date,mode:"time",locale:"pt-br",doneButtonLabel:"Confirmar",cancelButtonLabel:"Cancelar"}).then(o=>{const r=new Date(this.osForm.controls.dataehoraentrada.value);r.setHours(o.getHours()),r.setMinutes(o.getMinutes()),this.osForm.controls.horaentrada.setValue(o.toLocaleTimeString()),this.osForm.controls.dataehoraentrada.setValue(r.toISOString())})})}}return i.\u0275fac=function(o){return new(o||i)(e.Y36(d.qu),e.Y36(f),e.Y36(D.M),e.Y36(t.t4))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:18,vars:1,consts:[["xmlns","http://www.w3.org/1999/xhtml"],["slot","start"],["defaultHref","ordensdeservico-listagem"],["padding",""],["color","light"],["no-padding",""],["col-3","","align-self-center",""],["src","assets/imgs/icon_atendimentos.png",2,"width","50px","height","50px"],["col-9",""],[2,"font-size","30px"],[4,"ngIf"],[3,"formGroup"],["lines","none",3,"disabled"],["position","floating",1,"label-input-title"],["placeholder","Selecione um cliente","name","clienteid","formControlName","clienteid",2,"margin-left","3%",3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","veiculo","type","text",2,"margin-left","3%"],["lines","none",1,"ion-no-padding"],[3,"click"],[1,"ion-no-padding"],["size","9"],["lines","none"],["position","floating"],["formControlName","dataentrada"],["fill","clear",1,"ion-no-margin;ion-no-padding"],["icon","calendar"],["position","stacked"],["formControlName","horaentrada"],["shape","round","color","primary","expand","block","padding","",4,"ngIf"],["no-padding","",4,"ngIf"],[3,"value"],["shape","round","color","primary","expand","block","padding",""],["col-6",""],["shape","round","color","success","size","small","padding","","expand","block"],["shape","round","color","warning","size","small","padding","","expand","block"]],template:function(o,r){1&o&&(e.TgZ(0,"html",0),e._UZ(1,"head"),e.TgZ(2,"ion-header")(3,"ion-toolbar")(4,"ion-buttons",1),e._UZ(5,"ion-back-button",2),e.qZA(),e.TgZ(6,"ion-title"),e._uU(7,"Ordem de Servi\xc3\xa7o"),e.qZA()()(),e.TgZ(8,"ion-content",3)(9,"ion-item-divider",4)(10,"ion-grid",5)(11,"ion-row",5)(12,"ion-col",6),e._UZ(13,"ion-img",7),e.qZA(),e.TgZ(14,"ion-col",8)(15,"ion-label",9),e._uU(16,"Dados do atendimento"),e.qZA()()()()(),e.YNc(17,E,41,7,"ng-container",10),e.qZA()()),2&o&&(e.xp6(17),e.Q6J("ngIf",r.osForm))},dependencies:[s.sg,s.O5,d._Y,d.JJ,d.JL,t.oU,t.YG,t.Sm,t.wI,t.W2,t.jY,t.Gu,t.gu,t.Xz,t.pK,t.Ie,t.rH,t.Q$,t.Nd,t.t9,t.n0,t.wd,t.sr,t.QI,t.j9,t.cs,d.sg,d.u],encapsulation:2}),i})()}];let x=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(b),g.Bz]}),i})(),T=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[s.ez,d.u5,t.Pc,x,d.UX]}),i})()}}]);